# –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–≤ –∞–≤—Ç–æ: –§–æ—Ä–º–∞ vs –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

**–î–∞—Ç–∞:** 28 –¥–µ–∫–∞–±—Ä—è 2024  
**–°—Ç–∞—Ç—É—Å:** –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω ‚úÖ

---

## üêõ –ü–†–û–ë–õ–ï–ú–ê

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ç–∏–ø—É –∞–≤—Ç–æ" –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞. –≠—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è **–ù–ï —Å–æ–≤–ø–∞–¥–∞—é—Ç** —Å —Ç–µ–º, —á—Ç–æ –∑–∞—Ç–µ–º –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–æ–±—ã—Ç–∏—è.

**–ü—Ä–∏–º–µ—Ä—ã:**

| –ß—Ç–æ –≤—ã–±—Ä–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | –ß—Ç–æ –≤–∏–¥–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ |
|------------------------|-----------------------|
| "–í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫" | "–õ—é–±–æ–π" (fallback) |
| "–ö—Ä–æ—Å—Å–æ–≤–µ—Ä" | "–í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫" ‚ùå |
| "–°–µ–¥–∞–Ω" | "–õ–µ–≥–∫–æ–≤–æ–π" ‚ùå |
| "–°–ø–æ—Ä—Ç–∫–∞—Ä" | "–õ—é–±–æ–π" (fallback) |

---

## üîç –ü–†–ò–ß–ò–ù–ê

**–§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è:**
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–∏–ø—ã –∏–∑ –ë–î —á–µ—Ä–µ–∑ API `/api/vehicle-types`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `vehicle_types` —Ç–∞–±–ª–∏—Ü—É (SSOT)
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç: "–í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫", "–°–µ–¥–∞–Ω", "–ö—Ä–æ—Å—Å–æ–≤–µ—Ä", "–°–ø–æ—Ä—Ç–∫–∞—Ä", "–ö–ª–∞—Å—Å–∏–∫–∞", "–î—Ä—É–≥–æ–µ"

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–±—ã—Ç–∏—è:**
- ‚ùå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç hardcoded mapping –≤ `src/app/(app)/events/[id]/page.tsx`
- ‚ùå Mapping —É—Å—Ç–∞—Ä–µ–ª –∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ë–î
- ‚ùå –ö–æ–¥:
```tsx
const vehicleTypeLabelMap: Record<string, string> = {
  any: "–õ—é–±–æ–π",
  sedan: "–õ–µ–≥–∫–æ–≤–æ–π",      // –í –ë–î: "–°–µ–¥–∞–Ω"
  crossover: "–ö—Ä–æ—Å—Å–æ–≤–µ—Ä", // –í –ë–î –Ω–µ—Ç 'crossover', –µ—Å—Ç—å 'suv'
  suv: "–í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫",     // –í –ë–î 'suv' = "–ö—Ä–æ—Å—Å–æ–≤–µ—Ä"
};
```

---

## üéØ –†–ï–®–ï–ù–ò–ï

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:** –í–∞—Ä–∏–∞–Ω—Ç 1 (Hydration Pattern)

### –°—É—Ç—å —Ä–µ—à–µ–Ω–∏—è

–î–æ–±–∞–≤–∏—Ç—å hydration –¥–ª—è —Ç–∏–ø–æ–≤ –∞–≤—Ç–æ, –∫–∞–∫ —ç—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è –≥–æ—Ä–æ–¥–æ–≤, –≤–∞–ª—é—Ç –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

1. ‚ú® –î–æ–±–∞–≤–∏—Ç—å `hydrateVehicleTypes()` –≤ `src/lib/utils/hydration.ts`
2. ‚úèÔ∏è –û–±–Ω–æ–≤–∏—Ç—å `Event` interface (–¥–æ–±–∞–≤–∏—Ç—å `vehicleType?: VehicleType | null`)
3. ‚úèÔ∏è –ü—Ä–∏–º–µ–Ω–∏—Ç—å hydration –≤ `src/lib/db/eventRepo.ts`
4. ‚úèÔ∏è –£–±—Ä–∞—Ç—å hardcoded mapping –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–æ–±—ã—Ç–∏—è
5. ‚úèÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `event.vehicleType?.nameRu ?? "–õ—é–±–æ–π"`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ Single Source of Truth (–ë–î)
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (StaticCache)
- ‚úÖ Type-safe
- ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã

---

## üìã –§–ê–ô–õ–´

- **–ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑:** `analysis.md`
- **–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã:**
  - `src/app/(app)/events/[id]/page.tsx` (–ø—Ä–æ–±–ª–µ–º–∞ –∑–¥–µ—Å—å)
  - `src/components/events/event-form.tsx` (—Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ)
  - `src/lib/db/vehicleTypeRepo.ts` (SSOT)
  - `supabase/migrations/20241216_create_vehicle_types.sql` (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)

---

## ‚è±Ô∏è –û–¶–ï–ù–ö–ê

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è  
**–í—Ä–µ–º—è:** 4-6 —á–∞—Å–æ–≤  
**–†–∏—Å–∫:** –ù–∏–∑–∫–∏–π (–ø–∞—Ç—Ç–µ—Ä–Ω —É–∂–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω)  
**–§–∞–π–ª–æ–≤ –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—é:** 6-8

---

## üîó –°–í–Ø–ó–ê–ù–ù–´–ï –î–û–ö–£–ú–ï–ù–¢–´

- `docs/ARCHITECTURE.md` (Ownership Map, Hydration Pattern)
- `docs/DATABASE.md` (vehicle_types —Ç–∞–±–ª–∏—Ü–∞)

---

**–ì–æ—Ç–æ–≤ –∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é:** ‚úÖ

