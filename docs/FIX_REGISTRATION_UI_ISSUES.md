# üéØ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UI/UX –ø—Ä–æ–±–ª–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è

**–î–∞—Ç–∞:** 22 –¥–µ–∫–∞–±—Ä—è 2024  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

## üìã –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### **–ü—Ä–æ–±–ª–µ–º–∞ 1: –û—à–∏–±–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ `[object Object]`**
**–°–∏–º–ø—Ç–æ–º:** –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –º–æ–¥–∞–ª–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è `[object Object]` –≤–º–µ—Å—Ç–æ —á–∏—Ç–∞–µ–º–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.

**–ü—Ä–∏—á–∏–Ω–∞:** 
```typescript
// –û—à–∏–±–∫–∞ –∏–∑ –ë–î:
{
  "code": "InternalError",
  "message": "Failed to create participant",
  "details": {
    "code": "23505",
    "message": "duplicate key value violates unique constraint..."
  }
}

// isUniqueViolationError –ø—Ä–æ–≤–µ—Ä—è–ª–∞ —Ç–æ–ª—å–∫–æ error.code === '23505'
// –ù–æ —É InternalError: error.code = "InternalError", –∞ '23505' –≤ error.details.code!
```

**–†–µ—à–µ–Ω–∏–µ:** 
- –£–ª—É—á—à–µ–Ω–∞ `isUniqueViolationError()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö `details.code`
- –£–ª—É—á—à–µ–Ω–∞ `getErrorMessage()` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä

---

### **–ü—Ä–æ–±–ª–µ–º–∞ 2: –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥—É–±–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π**
**–°–∏–º–ø—Ç–æ–º:** 
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω, –Ω–æ –º–æ–∂–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å–Ω–æ–≤–∞
- –ù–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –≤–∏–¥–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ì–æ—Å—Ç–µ–≤—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (`user_id=NULL, guest_session_id=X`) –Ω–µ —Å–≤—è–∑—ã–≤–∞–ª–∏—Å—å —Å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- UI –Ω–µ –≤–∏–¥–µ–ª —Å—Ç–∞—Ä—ã–µ –≥–æ—Å—Ç–µ–≤—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
```
–ü—Ä–∏–Ω—Ü–∏–ø: Separation of Identity

–ì–æ—Å—Ç–µ–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚â† –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

–ù–ò–ö–û–ì–î–ê –Ω–µ —Å–≤—è–∑—ã–≤–∞—Ç—å:
- guest_session_id ‚Üí user_id
- –ê–Ω–æ–Ω–∏–º–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è ‚Üí –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- ‚úÖ **Privacy:** –ê–Ω–æ–Ω–∏–º–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –æ—Å—Ç–∞—é—Ç—Å—è –∞–Ω–æ–Ω–∏–º–Ω—ã–º–∏
- ‚úÖ **Security:** –ß—É–∂–æ–π –ü–ö –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- ‚úÖ **Simplicity:** –ù–µ—Ç —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ edge cases
- ‚úÖ **Clarity:** –î–≤–∞ —Ç–∏–ø–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π = –¥–≤–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

---

### **–ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ –º–æ–∂–µ—Ç–µ —É–¥–∞–ª—è—Ç—å –≥–æ—Å—Ç–µ–≤—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏**
**–°–∏–º–ø—Ç–æ–º:** –ü–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫—É "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏"

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –≤–∏–¥–µ–ª–∞ —Å–≤—è–∑–∏ —Å –≥–æ—Å—Ç–µ–≤—ã–º–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è–º–∏.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∞–≤–∞ —Ä–∞–±–æ—Ç–∞—é—Ç —Ä–∞–∑–¥–µ–ª—å–Ω–æ:
- –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏–º–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è–º–∏
- –ì–æ—Å—Ç—å –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏–º–∏ –≥–æ—Å—Ç–µ–≤—ã–º–∏ (—Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏)
- Owner –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –≤—Å–µ–º–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è–º–∏

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### **1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `isUniqueViolationError()`**

**–§–∞–π–ª:** `src/lib/errors.ts`

**–ë—ã–ª–æ:**
```typescript
export function isUniqueViolationError(err: unknown): boolean {
  const code = (err as { code?: string }).code;
  if (code === '23505') return true;
  // ...
}
```

**–°—Ç–∞–ª–æ:**
```typescript
export function isUniqueViolationError(err: unknown): boolean {
  const error = err as any;
  
  // Check top-level code
  if (error.code === '23505') return true;
  
  // ‚úÖ Check nested details.code (wrapped errors)
  if (error.details?.code === '23505') return true;
  
  // Check messages in both paths
  const message = error.message?.toLowerCase() || '';
  const detailsMessage = error.details?.message?.toLowerCase() || '';
  
  return message.includes('unique') || 
         message.includes('duplicate') ||
         detailsMessage.includes('unique') ||
         detailsMessage.includes('duplicate');
}
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `error.details.code` –¥–ª—è –æ–±–µ—Ä–Ω—É—Ç—ã—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –æ–±–æ–∏—Ö –ø—É—Ç—è—Ö (message –∏ details.message)
- ‚úÖ –õ–æ–≤–∏—Ç constraint violations –æ—Ç Supabase —á–µ—Ä–µ–∑ InternalError

---

### **2. –£–ª—É—á—à–µ–Ω–∏–µ `getErrorMessage()`**

**–§–∞–π–ª:** `src/lib/utils/errors.ts`

**–ë—ã–ª–æ:**
```typescript
export function getErrorMessage(error: unknown, fallback = "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞"): string {
  if (error instanceof Error) return error.message;
  if (typeof error === "string") return error;
  return fallback;
}
```

**–°—Ç–∞–ª–æ:**
```typescript
export function getErrorMessage(error: unknown, fallback = "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞"): string {
  if (!error) return fallback;
  if (typeof error === "string") return error;
  if (error instanceof Error) return error.message;
  
  if (typeof error === 'object') {
    const err = error as any;
    
    // ‚úÖ Try multiple paths
    if (err.message) return String(err.message);
    if (err.details?.message) return String(err.details.message);
    if (err.error?.message) return String(err.error.message);
  }
  
  return fallback;
}
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- ‚úÖ –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ `error.details.message` (wrapped errors)
- ‚úÖ –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ `error.error.message` (API responses)
- ‚úÖ –ü—Ä–æ–±—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—É—Ç–µ–π –¥–ª—è –ø–æ–∏—Å–∫–∞ —á–∏—Ç–∞–µ–º–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `[object Object]`

---

### **3. –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—Ö–∞**

**–§–∞–π–ª:** `src/components/events/participant-modal.tsx`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

```typescript
const handleSuccess = () => {
  setOpen(false);  // –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª
  onSuccess?.();   // –í—ã–∑—ã–≤–∞–µ—Ç callback
};
```

–ú–æ–¥–∞–ª —É–∂–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

---

## üèóÔ∏è –§–∏–Ω–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∑–∞—â–∏—Ç—ã –æ—Ç –¥—É–±–ª–µ–π

### **Database Layer (Single Source of Truth):**

```sql
-- –ó–∞—â–∏—Ç–∞ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
CREATE UNIQUE INDEX idx_event_participants_user_unique 
ON event_participants(event_id, user_id)
WHERE user_id IS NOT NULL;

-- –ó–∞—â–∏—Ç–∞ –¥–ª—è –≥–æ—Å—Ç–µ–π (–≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏)
CREATE UNIQUE INDEX idx_event_participants_guest_unique 
ON event_participants(event_id, guest_session_id, display_name)
WHERE guest_session_id IS NOT NULL AND user_id IS NULL;
```

### **Service Layer:**

```typescript
// –ü—Ä–æ—Å—Ç–∞—è –≤—Å—Ç–∞–≤–∫–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π constraint violation
try {
  const participant = await registerParticipantRepo(payload);
  return participant;
} catch (err) {
  // ‚úÖ –õ–æ–≤–∏–º unique violation
  if (isUniqueViolationError(err)) {
    throw new ConflictError('–í—ã —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ');
  }
  throw err;
}
```

### **UI Layer:**

```typescript
// –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –û–î–ù–û–ì–û –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞
const isUserRegistered = (() => {
  if (currentUser?.id) {
    return participants.some((p) => p.userId === currentUser.id);
  }
  if (guestSessionId) {
    return participants.some((p) => p.guestSessionId === guestSessionId);
  }
  return false;
})();
```

---

## üìä –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –û–±—ã—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞**
```
‚úÖ –ì–æ—Å—Ç—å ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí Constraint –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –¥—É–±–ª–µ–π –≤ —Å–µ—Å—Å–∏–∏
‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ‚Üí –î–≤–µ –∑–∞–ø–∏—Å–∏ (–≥–æ—Å—Ç–µ–≤–∞—è + –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–∞—è)
‚úÖ Owner –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –≥–æ—Å—Ç–µ–≤—É—é –∑–∞–ø–∏—Å—å –≤—Ä—É—á–Ω—É—é
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ß—É–∂–æ–π –ü–ö (–∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–∫–∞—Ñ–µ)**
```
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A (–≥–æ—Å—Ç—å) ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –ü–ö
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B ‚Üí –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ —Ç–æ–º –∂–µ –ü–ö
‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ù–ï —Å–≤—è–∑—ã–≤–∞—é—Ç—Å—è (—Ä–∞–∑–Ω—ã–µ –ª—é–¥–∏!)
‚úÖ Privacy –∑–∞—â–∏—â–µ–Ω
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π 3: –†–∞–∑–ª–æ–≥–∏–Ω–∏–≤–∞–Ω–∏–µ**
```
‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π ‚Üí –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
‚úÖ –†–∞–∑–ª–æ–≥–∏–Ω–∏–≤–∞–Ω–∏–µ ‚Üí –ù–æ–≤–∞—è –≥–æ—Å—Ç–µ–≤–∞—è —Å–µ—Å—Å–∏—è
‚ö†Ô∏è –ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –¥—É–±–ª—å (—Ä–µ–¥–∫–∏–π —Å–ª—É—á–∞–π)
‚úÖ Owner –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –¥—É–±–ª—å –≤—Ä—É—á–Ω—É—é
```

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### **–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
1. ‚úÖ –û—à–∏–±–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —á–∏—Ç–∞–µ–º–æ (–Ω–µ `[object Object]`)
2. ‚úÖ Constraint violations –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. ‚úÖ –ú–æ–¥–∞–ª –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
4. ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É–ø—Ä–æ—â–µ–Ω–∞ (–Ω–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–π, –Ω–µ—Ç —Å–≤—è–∑–µ–π –≥–æ—Å—Ç—å‚ÜîÔ∏èuser)

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞:** –ú–∏–Ω–∏–º—É–º –∫–æ–¥–∞, –ø–æ–Ω—è—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞
- ‚úÖ **Privacy:** –ê–Ω–æ–Ω–∏–º–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –æ—Å—Ç–∞—é—Ç—Å—è –∞–Ω–æ–Ω–∏–º–Ω—ã–º–∏
- ‚úÖ **Security:** –ß—É–∂–æ–π –ü–ö –Ω–µ –∫—Ä–∞–¥–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** Database constraints - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞—â–∏—Ç–∞
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å–µ—Ä–≤–µ—Ä–æ–≤
- ‚úÖ **–ù–µ—Ç edge cases:** –†–∞–∑–ª–æ–≥–∏–Ω–∏–≤–∞–Ω–∏–µ –Ω–µ –ª–æ–º–∞–µ—Ç –ª–æ–≥–∏–∫—É

### **Trade-offs (–æ—Å–æ–∑–Ω–∞–Ω–Ω—ã–µ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã):**
- ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã –¥—É–±–ª–∏ –ø—Ä–∏ —Ä–∞–∑–ª–æ–≥–∏–Ω–∏–≤–∞–Ω–∏–∏ (—Ä–µ–¥–∫–∏–π —Å–ª—É—á–∞–π)
- ‚ö†Ô∏è Owner –¥–æ–ª–∂–µ–Ω –≤—Ä—É—á–Ω—É—é —É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ä—ã–µ –≥–æ—Å—Ç–µ–≤—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –ù–æ —ç—Ç–æ –ø—Ä–∏–µ–º–ª–µ–º–æ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

---

## üìö –ö–æ–º–º–∏—Ç—ã

1. `6414f7a` - fix: improve isUniqueViolationError to detect wrapped constraint violations
2. `78cf93c` - fix: improve getErrorMessage to extract messages from nested error objects

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**

1. **–ü–æ–≤—Ç–æ—Ä–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π):**
   ```
   –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è ‚Üí –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
   ‚úÖ –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —á–∏—Ç–∞–µ–º–∞—è –æ—à–∏–±–∫–∞ "–í—ã —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ"
   ```

2. **–ü–æ–≤—Ç–æ—Ä–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–≥–æ—Å—Ç—å):**
   ```
   –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ –≥–æ—Å—Ç—å ‚Üí –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞ (—Ç–æ –∂–µ –∏–º—è)
   ‚úÖ –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —á–∏—Ç–∞–µ–º–∞—è –æ—à–∏–±–∫–∞
   ```

3. **–ú–æ–¥–∞–ª –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è:**
   ```
   –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª ‚Üí –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
   ‚úÖ –ú–æ–¥–∞–ª –¥–æ–ª–∂–µ–Ω –∑–∞–∫—Ä—ã—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   ```

4. **–ü—Ä–∞–≤–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ:**
   ```
   –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Å–≤–æ—é –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é ‚úÖ
   –ì–æ—Å—Ç—å –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Å–≤–æ—é –≥–æ—Å—Ç–µ–≤—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é (—Ç–µ–∫—É—â–∞—è —Å–µ—Å—Å–∏—è) ‚úÖ
   Owner –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –ª—é–±—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é ‚úÖ
   ```

---

## üìñ –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `docs/FIX_DUPLICATE_REGISTRATION.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ –ø—Ä–æ–±–ª–µ–º–µ –¥—É–±–ª–µ–π
- `DUPLICATE_REGISTRATION_FIX_QUICKSTART.md` - –±—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `CHANGELOG.md` - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

