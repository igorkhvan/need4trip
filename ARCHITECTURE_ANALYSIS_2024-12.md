# –ê–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ Need4Trip

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 25 –¥–µ–∫–∞–±—Ä—è 2024  
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** 2.0  
**–ê–Ω–∞–ª–∏—Ç–∏–∫:** AI Architecture Review

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞](#–æ–±—â–∞—è-–æ—Ü–µ–Ω–∫–∞)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
3. [–ü—Ä–æ–±–ª–µ–º—ã –∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ](#–ø—Ä–æ–±–ª–µ–º—ã-–∏-–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
4. [–ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å](#–Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)
5. [–†–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω–æ—Å—Ç—å –∫–æ–¥–∞](#—Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω–æ—Å—Ç—å-–∫–æ–¥–∞)
6. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–ø–æ-—É–ª—É—á—à–µ–Ω–∏—é)

---

## üìä –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞

### ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

1. **–ß–µ—Ç–∫–∞—è –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ API routes, services, repositories, mappers
2. **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ TypeScript —Å strict mode
3. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã** - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
4. **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫** - Next.js 15, React 19, Server Components
5. **–•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø–∞–ø–∫–∞ `/docs` —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º
6. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞** - `/figma` —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –∏ –≥–∞–π–¥–ª–∞–π–Ω–∞–º–∏

### ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç** (2 —Ñ–∞–π–ª–∞ —Å –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏)
2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫** (`/app/(marketing)` –ø—É—Å—Ç–∞—è)
3. **–ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `ensureAdminClient()`** –≤–æ –≤—Å–µ—Ö DB repo (102 –≤—ã–∑–æ–≤–∞)
4. **–°–º–µ—à–∞–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ hydration** (–æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
5. **–ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –≤ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏** (camelCase vs snake_case –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö)
6. **–†–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω–æ—Å—Ç—å –ª–æ–≥–∏–∫–∏ visibility** —Å–æ–±—ã—Ç–∏–π

---

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
need4trip/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/                      # Next.js App Router
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (app)/               # –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ events/          # –°–æ–±—ã—Ç–∏—è (9 —Ñ–∞–π–ª–æ–≤)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clubs/           # –ö–ª—É–±—ã (7 —Ñ–∞–π–ª–æ–≤)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile/         # –ü—Ä–æ—Ñ–∏–ª—å (2 —Ñ–∞–π–ª–∞)
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pricing/         # –¢–∞—Ä–∏—Ñ—ã (1 —Ñ–∞–π–ª)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (marketing)/         # –õ–µ–Ω–¥–∏–Ω–≥–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ _components/     # ‚ùå –ü–£–°–¢–ê–Ø –ü–ê–ü–ö–ê
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/                 # API routes (27 endpoints)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ layout.tsx           # Root layout
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ components/              # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/                  # Base UI (52 —Ñ–∞–π–ª–∞)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ events/              # –°–æ–±—ã—Ç–∏—è (27 —Ñ–∞–π–ª–æ–≤)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clubs/               # –ö–ª—É–±—ã (6 —Ñ–∞–π–ª–æ–≤)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/                # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (7 —Ñ–∞–π–ª–æ–≤)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ lib/                     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db/                  # Repositories (20 —Ñ–∞–π–ª–æ–≤, 130 —Ñ—É–Ω–∫—Ü–∏–π)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/            # Services (11 —Ñ–∞–π–ª–æ–≤, 62 —Ñ—É–Ω–∫—Ü–∏–∏)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/               # TypeScript —Ç–∏–ø—ã (14 —Ñ–∞–π–ª–æ–≤)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/               # –£—Ç–∏–ª–∏—Ç—ã (17 —Ñ–∞–π–ª–æ–≤)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/                # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (4 —Ñ–∞–π–ª–∞)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ hooks/                   # React —Ö—É–∫–∏ (7 —Ñ–∞–π–ª–æ–≤)
‚îÇ
‚îú‚îÄ‚îÄ docs/                        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (111 MD —Ñ–∞–π–ª–æ–≤)
‚îú‚îÄ‚îÄ figma/                       # –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞ (–æ—Ç–¥–µ–ª—å–Ω–æ–µ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
‚îî‚îÄ‚îÄ supabase/                    # Database migrations (69 –º–∏–≥—Ä–∞—Ü–∏–π)
```

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã

- **Total API routes:** 27
- **Total components:** ~90
- **Database repositories:** 20 (130 —Ñ—É–Ω–∫—Ü–∏–π)
- **Services:** 11 (62 —Ñ—É–Ω–∫—Ü–∏–∏)
- **Utility modules:** 17
- **Type definitions:** 14
- **React hooks:** 7
- **Database migrations:** 69

---

## üîÑ –ü—Ä–æ–±–ª–µ–º—ã –∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–≤–µ –ø–∞–ø–∫–∏ —Å –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç.

#### –§–∞–π–ª 1: `/src/lib/utils/dates.ts`

```typescript
export function formatDateTime(iso: string): string;
export function formatDateTimeShort(iso: string): string;
export function formatDate(iso: string): string;
export function formatDateShort(iso: string): string;
export function getDaysUntil(dateTime: string): number;
export function isEventStarted(dateTime: string): boolean;
export function isEventStartingSoon(dateTime: string): boolean;
```

#### –§–∞–π–ª 2: `/src/lib/utils/date-time.ts`

```typescript
export function parseDateTime(value: string | null | undefined): Date | null;
export function serializeDateTime(date: Date | null | undefined): string;
export function formatDateTime(date: Date | null | undefined): string; // ‚ùå –î–£–ë–õ–ò–ö–ê–¢
export function formatDate(date: Date | null | undefined): string;     // ‚ùå –î–£–ë–õ–ò–ö–ê–¢
export function formatTime(date: Date | null | undefined): string;
export function roundMinutes(date: Date, step: number): Date;
export function combineDateTime(date: Date, timeString: string): Date;
export function generateTimeSlots(step: number): Array<{...}>;
export function isDateInRange(...): boolean;
export function isInFuture(date: Date | null, toleranceMinutes: number): boolean;
export function getNowRounded(step: number): Date;
export function addHours(date: Date, hours: number): Date;
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ:**

```bash
# –ò–º–ø–æ—Ä—Ç—ã –∏–∑ dates.ts
src/components/events/event-card-detailed.tsx: formatDateTimeShort
src/components/events/event-card-compact.tsx: formatDateTimeShort
src/components/clubs/club-subscription-card.tsx: formatDateTimeShort
src/app/(app)/events/[id]/page.tsx: formatDateTimeShort

# –ò–º–ø–æ—Ä—Ç—ã –∏–∑ date-time.ts
src/components/ui/date-picker.tsx: parseDateTime, serializeDateTime, formatDateTime
```

**–ü—Ä–æ–±–ª–µ–º—ã:**

1. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º–µ–Ω:** `formatDateTime` –∏ `formatDate` —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –æ–±–æ–∏—Ö —Ñ–∞–π–ª–∞—Ö
2. **–†–∞–∑–Ω—ã–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã:** `dates.ts` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `string`, `date-time.ts` —Å `Date`
3. **–ü—É—Ç–∞–Ω–∏—Ü–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:** –∫–∞–∫–æ–π —Ñ–∞–π–ª –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å?
4. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏:** –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω—É–∂–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

```typescript
// –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª: /src/lib/utils/date-formatting.ts
// –°–µ–∫—Ü–∏—è 1: Parsing & Serialization
export function parseDateTime(value: string): Date | null;
export function serializeDateTime(date: Date): string;

// –°–µ–∫—Ü–∏—è 2: Formatting (–¥–ª—è UI)
export function formatDateTime(date: Date | string): string;
export function formatDateTimeShort(date: Date | string): string;
export function formatDate(date: Date | string): string;
export function formatTime(date: Date): string;

// –°–µ–∫—Ü–∏—è 3: Date manipulation
export function roundMinutes(date: Date, step: number): Date;
export function combineDateTime(date: Date, timeString: string): Date;
export function addHours(date: Date, hours: number): Date;

// –°–µ–∫—Ü–∏—è 4: Validation & Checks
export function isDateInRange(...): boolean;
export function isInFuture(date: Date, toleranceMinutes: number): boolean;
export function getDaysUntil(dateTime: string): number;
export function isEventStarted(dateTime: string): boolean;

// –°–µ–∫—Ü–∏—è 5: Generators
export function generateTimeSlots(step: number): Array<{...}>;
export function getNowRounded(step: number): Date;
```

---

### 2. ‚ö†Ô∏è –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ `ensureAdminClient()`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞–∂–¥–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤ 20 repository —Ñ–∞–π–ª–∞—Ö –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏.

**–ü—Ä–∏–º–µ—Ä (–ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è 130 —Ä–∞–∑):**

```typescript
// src/lib/db/eventRepo.ts
export async function listEvents(page = 1, limit = 12) {
  ensureAdminClient();  // ‚ùå –î–£–ë–õ–ò–†–£–ï–¢–°–Ø –í –ö–ê–ñ–î–û–ô –§–£–ù–ö–¶–ò–ò
  if (!supabaseAdmin) return { data: [], total: 0, hasMore: false };
  
  const { data, error } = await supabaseAdmin
    .from(table)
    .select("*")
    ...
}

// src/lib/db/clubRepo.ts
export async function getClubById(id: string) {
  ensureAdminClient();  // ‚ùå –î–£–ë–õ–ò–†–£–ï–¢–°–Ø –í –ö–ê–ñ–î–û–ô –§–£–ù–ö–¶–ò–ò
  if (!supabaseAdmin) return null;
  
  const { data, error } = await supabaseAdmin
    .from("clubs")
    ...
}
```

**–í—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –≤:**

- `userCarRepo.ts` (7 —Ä–∞–∑)
- `eventRepo.ts` (16 —Ä–∞–∑)
- `clubRepo.ts` (15 —Ä–∞–∑)
- `participantRepo.ts` (14 —Ä–∞–∑)
- `clubMemberRepo.ts` (13 —Ä–∞–∑)
- –ò –µ—â–µ 14 —Ñ–∞–π–ª–æ–≤...

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

–°–æ–∑–¥–∞—Ç—å wrapper —Ñ—É–Ω–∫—Ü–∏—é –∏–ª–∏ middleware –¥–ª—è repo —Å–ª–æ—è:

```typescript
// src/lib/db/client.ts

export function createRepoClient() {
  ensureAdminClient();
  if (!supabaseAdmin) {
    throw new InternalError("Supabase Admin client not initialized");
  }
  return supabaseAdmin;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ repo:
export async function listEvents(page = 1, limit = 12) {
  const db = createRepoClient(); // ‚úÖ –û–¥–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞
  
  const { data, error } = await db
    .from("events")
    .select("*")
    ...
}
```

---

### 3. ‚ö†Ô∏è –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ hydration –ª–æ–≥–∏–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–æ–≥–∏–∫–∞ hydration —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–∞ –ø–æ 2 —Ñ–∞–π–ª–∞–º —Å –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º.

#### –§–∞–π–ª 1: `/src/lib/utils/hydration.ts`

```typescript
export async function hydrateCities<T>(...): Promise<...>
export async function hydrateCitiesByIds(...): Promise<...>
export async function hydrateCurrencies<T>(...): Promise<...>
export async function hydrateCitiesAndCurrencies<T>(...): Promise<...>
```

#### –§–∞–π–ª 2: `/src/lib/utils/eventCategoryHydration.ts`

```typescript
export async function hydrateEventCategories<T>(...): Promise<...>
```

**–í–æ–ø—Ä–æ—Å—ã:**

1. –ü–æ—á–µ–º—É –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–æ–±—ã—Ç–∏–π –≤—ã–Ω–µ—Å–µ–Ω—ã –æ—Ç–¥–µ–ª—å–Ω–æ?
2. –ü–æ—á–µ–º—É `hydrateCitiesAndCurrencies` –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ, –∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–¥–µ–ª—å–Ω–æ?
3. –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å hydration –¥—Ä—É–≥–∏—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π (brands, locations)?

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

–û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª —Å —á–µ—Ç–∫–∏–º–∏ —Å–µ–∫—Ü–∏—è–º–∏:

```typescript
// src/lib/utils/hydration.ts

// ============================================================================
// Cities Hydration
// ============================================================================
export async function hydrateCities<T>(...): Promise<...>
export async function hydrateCitiesByIds(...): Promise<...>

// ============================================================================
// Currencies Hydration
// ============================================================================
export async function hydrateCurrencies<T>(...): Promise<...>

// ============================================================================
// Event Categories Hydration
// ============================================================================
export async function hydrateEventCategories<T>(...): Promise<...>

// ============================================================================
// Combined Hydration (for performance)
// ============================================================================
export async function hydrateCitiesAndCurrencies<T>(...): Promise<...>
export async function hydrateEventsComplete<T>(...): Promise<...> // NEW
```

---

### 4. ‚ö†Ô∏è –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ü—É—Å—Ç—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—É—Å—Ç—ã–µ –ø–∞–ø–∫–∏ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞—é—Ç –ø—É—Ç–∞–Ω–∏—Ü—É.

```bash
app/(marketing)/_components/   # ‚ùå –ü–£–°–¢–ê–Ø
```

**–ò—Å—Ç–æ—Ä–∏—è:**

–ü–∞–ø–∫–∞ `/app/(marketing)/_components/` –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ª–µ–Ω–¥–∏–Ω–≥–∞, –Ω–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤:
- `src/components/landing/hero.tsx`
- `src/app/(marketing)/_components/upcoming-events-async.tsx`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

```bash
# –£–¥–∞–ª–∏—Ç—å –ø—É—Å—Ç—É—é –ø–∞–ø–∫—É
rm -rf app/(marketing)/_components/

# –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –µ–¥–∏–Ω–æ–µ –º–µ—Å—Ç–æ
src/components/landing/
‚îú‚îÄ‚îÄ hero.tsx
‚îî‚îÄ‚îÄ upcoming-events-async.tsx
```

---

## üîÄ –ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

### 1. –°–º–µ—à–∞–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è

#### –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (snake_case):

```typescript
// src/lib/mappers.ts
export interface DbEvent {
  created_by_user_id: string | null;
  date_time: string;
  max_participants: number | null;
  custom_fields_schema: EventCustomFieldsSchema;
  vehicle_type_requirement: string;
  is_club_event: boolean;
}
```

#### –í domain –º–æ–¥–µ–ª—è—Ö (camelCase):

```typescript
export interface Event {
  createdByUserId: string | null;
  dateTime: string;
  maxParticipants: number | null;
  customFieldsSchema: EventCustomFieldsSchema;
  vehicleTypeRequirement: string;
  isClubEvent: boolean;
}
```

**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:** –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (PostgreSQL conventions ‚Üí TypeScript conventions), –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ–≥–æ –º–∞–ø–ø–∏–Ω–≥–∞ –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö.

**–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

- –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `event.date_time` –≤–º–µ—Å—Ç–æ `event.dateTime`
- –ù–µ –≤—Å–µ mappers –ø–æ–ª–Ω—ã–µ (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—è –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å runtime –≤–∞–ª–∏–¥–∞—Ü–∏—é –º–∞–ø–ø–∏–Ω–≥–∞ –≤ development mode.

---

### 2. –†–∞–∑–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ –ø–æ–ª—É—á–µ–Ω–∏—é —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ù–∞–π–¥–µ–Ω–æ 3 —Ä–∞–∑–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–∞:**

```typescript
// –ü–æ–¥—Ö–æ–¥ 1: –í Server Components
const currentUser = await getCurrentUser();

// –ü–æ–¥—Ö–æ–¥ 2: –í API routes (middleware)
const currentUser = await getCurrentUserFromMiddleware(request);

// –ü–æ–¥—Ö–æ–¥ 3: –í React Context (client)
const { currentUser } = useAuth();
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (87 –º–µ—Å—Ç –≤ –∫–æ–¥–µ):**

```bash
src/app/(app)/events/create/page.tsx: getCurrentUser
src/app/layout.tsx: getCurrentUser
src/app/api/events/[id]/route.ts: getCurrentUserFromMiddleware
src/components/auth/auth-provider.tsx: getCurrentUser (–¥–ª—è initial state)
```

**–ü—Ä–æ–±–ª–µ–º—ã:**

1. –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ —Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç
2. Race condition –≤ `/src/lib/services/events.ts:282` (—Å–º. –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –∫–æ–¥–µ)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ß–µ—Ç–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥.

---

### 3. –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ visibility

**–ù–∞–π–¥–µ–Ω–æ 3 –º–µ—Å—Ç–∞ —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π:**

1. `/src/lib/services/events.ts` - —Ñ—É–Ω–∫—Ü–∏—è `ensureEventVisibility()`
2. `/src/lib/utils/eventVisibility.ts` - —Ñ—É–Ω–∫—Ü–∏—è `enforceEventVisibility()`
3. `/src/lib/services/events.ts` - inline —Ñ–∏–ª—å—Ç—Ä –≤ `listVisibleEventsForUser()`

**–ü—Ä–∏–º–µ—Ä –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:**

```typescript
// –ú–µ—Å—Ç–æ 1: eventVisibility.ts (—Å—Ç—Ä–æ–∫–∞ 47)
export async function enforceEventVisibility(...) {
  if (event.visibility === "public") return;
  
  if (!currentUser) {
    throw new UnauthorizedError("–°–æ–±—ã—Ç–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ");
  }
  
  if (event.createdByUserId === currentUser.id) return;
  // ... –µ—â–µ 50 —Å—Ç—Ä–æ–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫
}

// –ú–µ—Å—Ç–æ 2: events.ts (—Å—Ç—Ä–æ–∫–∞ 136)
const filtered = uniqueEvents.filter(e => {
  if (e.visibility === "public") return true;
  
  if (e.createdByUserId === userId) return true;
  
  if (e.visibility === "unlisted") {
    return participantIds.has(e.id) || accessIds.has(e.id);
  }
  // ... –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –ª–æ–≥–∏–∫–∞
});
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (`eventVisibility.ts`).

---

## üìÇ –†–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω–æ—Å—Ç—å –∫–æ–¥–∞

### 1. –õ–æ–≥–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π —Ä–∞–∑–º–∞–∑–∞–Ω–∞ –ø–æ –º–Ω–æ–∂–µ—Å—Ç–≤—É —Ñ–∞–π–ª–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å —Å–æ–±—ã—Ç–∏—è–º–∏ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–∞ –ø–æ 9 —Ä–∞–∑–Ω—ã–º –º–µ—Å—Ç–∞–º:

```
–°–æ–±—ã—Ç–∏—è:
‚îú‚îÄ‚îÄ /src/lib/db/eventRepo.ts           # DB queries (556 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ /src/lib/services/events.ts        # Business logic (914 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ /src/lib/utils/eventVisibility.ts  # Visibility checks (270 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ /src/lib/utils/eventPermissions.ts # Permission checks (150 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ /src/lib/utils/eventChanges.ts     # Change detection (100 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ /src/lib/utils/eventCategories.ts  # Category helpers (80 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ /src/lib/utils/eventCategoryHydration.ts # Category hydration (47 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ /src/lib/types/event.ts            # Type definitions (200 —Å—Ç—Ä–æ–∫)
‚îî‚îÄ‚îÄ /src/app/api/events/               # API routes (3 —Ñ–∞–π–ª–∞)
```

**–ò—Ç–æ–≥–æ:** ~2300 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ–±—ã—Ç–∏–π, —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–Ω—ã—Ö –ø–æ 9 —Ñ–∞–π–ª–∞–º.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è event module:

```
src/modules/events/
‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îú‚îÄ‚îÄ types.ts
‚îÇ   ‚îî‚îÄ‚îÄ schemas.ts
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ repository.ts
‚îÇ   ‚îî‚îÄ‚îÄ mappers.ts
‚îú‚îÄ‚îÄ business/
‚îÇ   ‚îú‚îÄ‚îÄ service.ts
‚îÇ   ‚îú‚îÄ‚îÄ visibility.ts
‚îÇ   ‚îî‚îÄ‚îÄ permissions.ts
‚îî‚îÄ‚îÄ api/
    ‚îî‚îÄ‚îÄ routes.ts
```

---

### 2. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–Ω—ã

**–ù–∞–π–¥–µ–Ω–æ –≤ 3 –º–µ—Å—Ç–∞—Ö:**

```typescript
// –ú–µ—Å—Ç–æ 1: event-card-detailed.tsx
const priceLabel =
  event.isPaid && event.price
    ? `${event.price} ${event.currency?.symbol ?? event.currencyCode ?? ""}`.trim()
    : event.isPaid
      ? "–ü–ª–∞—Ç–Ω–æ–µ"
      : "–ë–µ—Å–ø–ª–∞—Ç–Ω–æ";

// –ú–µ—Å—Ç–æ 2: EventForm.tsx (–ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∞—è –∂–µ –ª–æ–≥–∏–∫–∞)
// –ú–µ—Å—Ç–æ 3: ParticipantModal.tsx (–ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∞—è –∂–µ –ª–æ–≥–∏–∫–∞)
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ–∑–¥–∞—Ç—å —É—Ç–∏–ª–∏—Ç—É:

```typescript
// src/lib/utils/price-formatting.ts
export function formatEventPrice(event: Event): string {
  if (!event.isPaid) return "–ë–µ—Å–ø–ª–∞—Ç–Ω–æ";
  if (!event.price) return "–ü–ª–∞—Ç–Ω–æ–µ";
  
  const symbol = event.currency?.symbol ?? event.currencyCode ?? "";
  return `${event.price} ${symbol}`.trim();
}
```

---

### 3. –†–∞–∑–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—é

**–ù–∞–π–¥–µ–Ω–æ 3 —Ä–∞–∑–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–∞:**

```typescript
// –ú–µ—Ö–∞–Ω–∏–∑–º 1: StaticCache (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π, –¥–ª—è reference data)
// src/lib/cache/staticCache.ts
export const staticCache = new StaticCache(60 * 1000); // 1 minute TTL

// –ú–µ—Ö–∞–Ω–∏–∑–º 2: React Server Components cache
// src/app/api/currencies/route.ts
export const revalidate = 3600; // 1 hour

// –ú–µ—Ö–∞–Ω–∏–∑–º 3: Manual memoization (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–æ–¥—Ö–æ–¥)
// –í—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
let cachedCities: City[] | null = null;
```

**–ü—Ä–æ–±–ª–µ–º—ã:**

1. –ù–µ–ø–æ–Ω—è—Ç–Ω–æ –∫–∞–∫–æ–π –º–µ—Ö–∞–Ω–∏–∑–º –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
2. StaticCache –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ –≤–µ–∑–¥–µ –≥–¥–µ –Ω—É–∂–Ω–æ
3. –ù–µ—Ç –µ–¥–∏–Ω–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ cache invalidation

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:

```markdown
## Caching Strategy

### Use StaticCache for:
- Reference data (cities, currencies, car brands)
- Data that changes rarely
- Data needed across multiple requests

### Use RSC revalidate for:
- Page-level data
- Public content
- Lists without user context

### Don't cache:
- User-specific data
- Real-time data (events, participants)
- Data behind auth
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (—Å–¥–µ–ª–∞—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)

1. **–û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ñ–∞–π–ª—ã —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏**
   - –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ `formatDateTime`/`formatDate`
   - –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π —Ñ–∞–π–ª `date-formatting.ts`
   - –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã (6 —Ñ–∞–π–ª–æ–≤)

2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å `ensureAdminClient()` –ø—Ä–æ–≤–µ—Ä–∫–∏**
   - –°–æ–∑–¥–∞—Ç—å wrapper `createRepoClient()`
   - –£–±—Ä–∞—Ç—å 130 –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
   - –î–æ–±–∞–≤–∏—Ç—å centralized error handling

3. **–£–¥–∞–ª–∏—Ç—å –ø—É—Å—Ç—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏**
   - –£–¥–∞–ª–∏—Ç—å `/app/(marketing)/_components/`
   - –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –í—ã—Å–æ–∫–∏–π (—Å–¥–µ–ª–∞—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è)

4. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É visibility**
   - –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ `eventVisibility.ts`
   - –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑ `events.ts`
   - –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã

5. **–û–±—ä–µ–¥–∏–Ω–∏—Ç—å hydration —É—Ç–∏–ª–∏—Ç—ã**
   - –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å `hydrateEventCategories` –≤ `hydration.ts`
   - –°–æ–∑–¥–∞—Ç—å `hydrateEventsComplete()` –¥–ª—è –ø–æ–ª–Ω–æ–π –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏
   - –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é

6. **–°–æ–∑–¥–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–Ω—ã**
   - `formatEventPrice(event): string`
   - –ó–∞–º–µ–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ª–æ–≥–∏–∫—É –≤ 3 –º–µ—Å—Ç–∞—Ö

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –°—Ä–µ–¥–Ω–∏–π (–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å)

7. **–£–ª—É—á—à–∏—Ç—å –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
   - –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å 3 –ø–æ–¥—Ö–æ–¥–∞ (Server/API/Client)
   - –î–æ–±–∞–≤–∏—Ç—å type guards –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
   - –ò—Å–ø—Ä–∞–≤–∏—Ç—å race conditions

8. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è**
   - –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å StaticCache
   - –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å RSC revalidate
   - –î–æ–±–∞–≤–∏—Ç—å cache monitoring

9. **–£–ª—É—á—à–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É event –ª–æ–≥–∏–∫–∏**
   - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
   - –£–º–µ–Ω—å—à–∏—Ç—å —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–æ–≤
   - –£–ª—É—á—à–∏—Ç—å navigability –∫–æ–¥–∞

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: –ù–∏–∑–∫–∏–π (backlog)

10. **–î–æ–±–∞–≤–∏—Ç—å runtime –≤–∞–ª–∏–¥–∞—Ü–∏—é mappers**
    - –ü—Ä–æ–≤–µ—Ä—è—Ç—å —á—Ç–æ –≤—Å–µ –ø–æ–ª—è –∑–∞–º–∞–ø–ª–µ–Ω—ã
    - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –ø–æ–ª—è—Ö –≤ dev mode

11. **–£–ª—É—á—à–∏—Ç—å documentation**
    - –î–æ–±–∞–≤–∏—Ç—å architecture decision records (ADR)
    - –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏
    - –°–æ–∑–¥–∞—Ç—å onboarding guide

12. **Code quality tools**
    - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ESLint –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
    - –î–æ–±–∞–≤–∏—Ç—å pre-commit hooks
    - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å code coverage

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

### –¢–µ–∫—É—â–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –û—Ü–µ–Ω–∫–∞ |
|---------|----------|--------|
| TypeScript coverage | 100% | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| Strict mode | Enabled | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| Layered architecture | –î–∞ | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| Code duplication | ~5% | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ |
| Naming consistency | ~85% | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ |
| Documentation | 111 MD —Ñ–∞–π–ª–æ–≤ | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| Dead code | –ú–∏–Ω–∏–º—É–º | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| Circular dependencies | –ù–µ—Ç | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å best practices

- ‚úÖ **Separation of Concerns** - —Ö–æ—Ä–æ—à–µ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏
- ‚úÖ **DRY** - –≤ —Ü–µ–ª–æ–º —Å–æ–±–ª—é–¥–∞–µ—Ç—Å—è, –∫—Ä–æ–º–µ –æ—Ç–º–µ—á–µ–Ω–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- ‚ö†Ô∏è **Single Responsibility** - –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∞–π–ª—ã —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ (events.ts - 914 —Å—Ç—Ä–æ–∫)
- ‚úÖ **Open/Closed** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ interfaces –∏ generic —Ç–∏–ø–æ–≤
- ‚úÖ **Dependency Inversion** - repositories –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç services
- ‚ö†Ô∏è **Don't Repeat Yourself** - –µ—Å—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å–º. –≤—ã—à–µ)

---

## üéì –í—ã–≤–æ–¥—ã

### –û–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: **7.5/10** üü¢

–ü—Ä–æ–µ–∫—Ç **Need4Trip** –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **—Ö–æ—Ä–æ—à—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** –∏ **–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥** –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã Clean Architecture —Å–æ–±–ª—é–¥–µ–Ω—ã, –∫–æ–¥ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–µ–Ω, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ.

### –û—Å–Ω–æ–≤–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:

1. ‚úÖ –ß–µ—Ç–∫–∞—è –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
2. ‚úÖ –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è TypeScript
3. ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (cache, logger, errors)
4. ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
5. ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π tech stack

### –¢–æ—á–∫–∏ —Ä–æ—Å—Ç–∞:

1. ‚ö†Ô∏è –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ utility —Ñ—É–Ω–∫—Ü–∏–π (–¥–∞—Ç—ã, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
2. ‚ö†Ô∏è –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ repository —Å–ª–æ–µ
3. ‚ö†Ô∏è –†–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω–æ—Å—Ç—å event-–ª–æ–≥–∏–∫–∏
4. ‚ö†Ô∏è –ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–¥—Ö–æ–¥–∞—Ö

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:

–ü—Ä–æ–≤–µ—Å—Ç–∏ **—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 1 –∏ 2** (–æ—Ü–µ–Ω–∫–∞ 2-3 –¥–Ω—è —Ä–∞–±–æ—Ç—ã), —á—Ç–æ –ø–æ–¥–Ω–∏–º–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ –¥–æ **8.5-9/10**.

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç –¥–µ–π—Å—Ç–≤–∏–π

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (1-2 –¥–Ω—è)

- [ ] –û–±—ä–µ–¥–∏–Ω–∏—Ç—å `dates.ts` –∏ `date-time.ts` –≤ `date-formatting.ts`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤ 6 —Ñ–∞–π–ª–∞—Ö
- [ ] –°–æ–∑–¥–∞—Ç—å `createRepoClient()` wrapper
- [ ] –£–¥–∞–ª–∏—Ç—å –ø—É—Å—Ç—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/app/(marketing)/_components/`

### –°–∫–æ—Ä–æ (3-5 –¥–Ω–µ–π)

- [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å `hydrateEventCategories` –≤ `hydration.ts`
- [ ] –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å visibility –ª–æ–≥–∏–∫—É –≤ `eventVisibility.ts`
- [ ] –°–æ–∑–¥–∞—Ç—å `formatEventPrice()` —É—Ç–∏–ª–∏—Ç—É
- [ ] –î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—é

### –ü–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å (1-2 –Ω–µ–¥–µ–ª–∏)

- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥—Ö–æ–¥—ã –∫ –ø–æ–ª—É—á–µ–Ω–∏—é currentUser
- [ ] –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å error handling
- [ ] –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è events
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å code quality tools

---

**–ê–≤—Ç–æ—Ä –æ—Ç—á–µ—Ç–∞:** AI Architecture Review  
**–î–∞—Ç–∞:** 25 –¥–µ–∫–∞–±—Ä—è 2024  
**–°–ª–µ–¥—É—é—â–∏–π review:** –ú–∞—Ä—Ç 2025

